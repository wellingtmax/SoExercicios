<div class="container">
  <h1>Gerenciamento de Usuários</h1>

  <!-- Formulário de Usuários -->
  <div class="form-container">
    <h3>{{ editando ? 'Editar Usuário' : 'Adicionar Usuário' }}</h3>
    <form (ngSubmit)="salvar()" #form="ngForm">
      <!-- Input 1: ID (somente leitura para edição) -->
      <div class="input-group" *ngIf="editando">
        <label for="id">ID:</label>
        <input
          type="number"
          id="id"
          name="id"
          placeholder="ID"
          [(ngModel)]="usuario.id"
          readonly
        />
      </div>

      <!-- Input 2: Nome -->
      <div class="input-group">
        <label for="nome">Nome:</label>
        <input
          type="text"
          id="nome"
          name="nome"
          placeholder="Digite o nome do usuário"
          required
          [(ngModel)]="usuario.nome"
        />
      </div>

      <!-- Input 3: Email -->
      <div class="input-group">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Digite o email do usuário"
          required
          [(ngModel)]="usuario.email"
        />
      </div>

      <!-- Botões de ação -->
      <div class="button-group">
        <button type="button" class="btn btn-info" (click)="listar()">Listar</button>
        <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
          {{ editando ? 'Atualizar' : 'Salvar' }}
        </button>
        <button type="button" class="btn btn-secondary" (click)="limpar()">Limpar</button>
      </div>
    </form>
  </div>

  <!-- Lista de Usuários -->
  <div class="list-container">
    <h3>Lista de Usuários</h3>
    <div class="user-list">
      <div *ngIf="usuarios.length === 0; else userTable">
        <p>Nenhum usuário encontrado. Clique em "Listar" para carregar os usuários.</p>
      </div>

      <ng-template #userTable>
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>NOME</th>
              <th>EMAIL</th>
              <th>AÇÕES</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let u of usuarios">
              <td>{{u.id}}</td>
              <td>{{u.nome}}</td>
              <td>{{u.email}}</td>
              <td>
                <button class="btn btn-sm btn-warning" (click)="editar(u)">Editar</button>
                <button class="btn btn-sm btn-danger" (click)="excluir(u.id!)">Excluir</button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-template>
    </div>
  </div>
</div>
